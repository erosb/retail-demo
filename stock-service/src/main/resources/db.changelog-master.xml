<?xml version="1.0" encoding="UTF-8" ?>
<databaseChangeLog  xmlns="http://www.liquibase.org/xml/ns/dbchangelog"
                    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
                    xmlns:pro="http://www.liquibase.org/xml/ns/pro"
                    xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog
http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-4.1.xsd">

    <changeSet id="1" author="erosb">
        <createTable tableName="stock">
            <column name="product_id" type="varchar(250)">
                <constraints primaryKey="true" />
            </column>
            <column name="available_quantity" type="bigint" />
            <column name="reserved_quantity" type="bigint" />
        </createTable>

        <createTable tableName="address">
            <column name="id" autoIncrement="true" type="bigint">
                <constraints primaryKey="true"/>
            </column>
            <column name="country" type="varchar(50)" />
            <column name="postalCode" type="varchar(4)" />
            <column name="city" type="varchar(50)" />
            <column name="streetAddress" type="varchar(100)" />
        </createTable>

        <createTable tableName="order">
            <column name="order_id" autoIncrement="true" type="bigint">
                <constraints primaryKey="true" />
            </column>
            <column name="shipping_address_id" type="bigint">
<!--                <constraints referencedTableName="address" referencedColumnNames="id" />-->
                <constraints references="address(id)" foreignKeyName="fk_order_shipping_address"/>
            </column>
            <column name="invoice_address_id" type="bigint">
<!--                <constraints referencedTableName="address" referencedColumnNames="id" />-->
                <constraints references="address(id)" foreignKeyName="fk_order_invoice_address"/>
            </column>
        </createTable>

        <createTable tableName="order_line">
            <column name="id" autoIncrement="true" type="bigint">
                <constraints primaryKey="true" />
            </column>
            <column name="order_id" type="bigint">
<!--                <constraints referencedTableName="order" referencedColumnNames="id" />-->
                <constraints references="order(order_id)" foreignKeyName="fk_order_line_order"/>
            </column>
            <column name="product_id" type="varchar(250)">
<!--                <constraints referencedTableName="stock" referencedColumnNames="product_id" />-->
                <constraints references="stock(product_id)" foreignKeyName="fk_order_line_stock"/>
            </column>
            <column name="quantity" type="int" />
        </createTable>
    </changeSet>

    <changeSet id="2" author="erosb">
        <insert tableName="stock">
            <column name="product_id" value="IGI6DQ" />
            <column name="reserved_quantity" value="0" />
            <column name="available_quantity" value="10000" />
            <column name="unit_price" value="810" />
        </insert>
        <insert tableName="stock">
            <column name="product_id" value="BOZ80T" />
            <column name="reserved_quantity" value="0" />
            <column name="available_quantity" value="10000" />
            <column name="unit_price" value="40" />
        </insert>
        <insert tableName="stock">
            <column name="product_id" value="K8HIU3" />
            <column name="reserved_quantity" value="0" />
            <column name="available_quantity" value="10000" />
            <column name="unit_price" value="400" />
        </insert>
        <insert tableName="stock">
            <column name="product_id" value="JDE7YU" />
            <column name="reserved_quantity" value="0" />
            <column name="available_quantity" value="10000" />
            <column name="unit_price" value="720" />
        </insert>
        <insert tableName="stock">
            <column name="product_id" value="GAVWDH" />
            <column name="reserved_quantity" value="0" />
            <column name="available_quantity" value="10000" />
            <column name="unit_price" value="130" />
        </insert>
        <insert tableName="stock">
            <column name="product_id" value="PWM0BB" />
            <column name="reserved_quantity" value="0" />
            <column name="available_quantity" value="10000" />
            <column name="unit_price" value="880" />
        </insert>
        <insert tableName="stock">
            <column name="product_id" value="7KYXIM" />
            <column name="reserved_quantity" value="0" />
            <column name="available_quantity" value="10000" />
            <column name="unit_price" value="370" />
        </insert>
        <insert tableName="stock">
            <column name="product_id" value="G8UKJM" />
            <column name="reserved_quantity" value="0" />
            <column name="available_quantity" value="10000" />
            <column name="unit_price" value="700" />
        </insert>
        <insert tableName="stock">
            <column name="product_id" value="U4YNK1" />
            <column name="reserved_quantity" value="0" />
            <column name="available_quantity" value="10000" />
            <column name="unit_price" value="450" />
        </insert>
        <insert tableName="stock">
            <column name="product_id" value="822GWT" />
            <column name="reserved_quantity" value="0" />
            <column name="available_quantity" value="10000" />
            <column name="unit_price" value="400" />
        </insert>
        <insert tableName="stock">
            <column name="product_id" value="GIRJNC" />
            <column name="reserved_quantity" value="0" />
            <column name="available_quantity" value="10000" />
            <column name="unit_price" value="500" />
        </insert>
        <insert tableName="stock">
            <column name="product_id" value="7282Y1" />
            <column name="reserved_quantity" value="0" />
            <column name="available_quantity" value="10000" />
            <column name="unit_price" value="240" />
        </insert>
        <insert tableName="stock">
            <column name="product_id" value="4IYCKU" />
            <column name="reserved_quantity" value="0" />
            <column name="available_quantity" value="10000" />
            <column name="unit_price" value="830" />
        </insert>
        <insert tableName="stock">
            <column name="product_id" value="PP46UO" />
            <column name="reserved_quantity" value="0" />
            <column name="available_quantity" value="10000" />
            <column name="unit_price" value="810" />
        </insert>
        <insert tableName="stock">
            <column name="product_id" value="9CT7C4" />
            <column name="reserved_quantity" value="0" />
            <column name="available_quantity" value="10000" />
            <column name="unit_price" value="270" />
        </insert>
        <insert tableName="stock">
            <column name="product_id" value="TNQ4MS" />
            <column name="reserved_quantity" value="0" />
            <column name="available_quantity" value="10000" />
            <column name="unit_price" value="580" />
        </insert>
        <insert tableName="stock">
            <column name="product_id" value="GSN64K" />
            <column name="reserved_quantity" value="0" />
            <column name="available_quantity" value="10000" />
            <column name="unit_price" value="20" />
        </insert>
        <insert tableName="stock">
            <column name="product_id" value="9P7BMH" />
            <column name="reserved_quantity" value="0" />
            <column name="available_quantity" value="10000" />
            <column name="unit_price" value="30" />
        </insert>
        <insert tableName="stock">
            <column name="product_id" value="9LE1TN" />
            <column name="reserved_quantity" value="0" />
            <column name="available_quantity" value="10000" />
            <column name="unit_price" value="50" />
        </insert>
        <insert tableName="stock">
            <column name="product_id" value="AX3MRO" />
            <column name="reserved_quantity" value="0" />
            <column name="available_quantity" value="10000" />
            <column name="unit_price" value="820" />
        </insert>
    </changeSet>
</databaseChangeLog>
